{"ast":null,"code":"import { table, minifyRecord } from './utils/Airtable.js';\nimport auth0 from './utils/auth0';\nimport OwnsRecord from '../middleware/OwnsRecord.js';\nexport default auth0.requireAuthentication(async (req, res) => {\n  const {\n    id\n  } = req.body;\n\n  try {\n    const deletedRecords = await table.destroy([id]);\n    res.statusCode = 200;\n    res.json(minifyRecord(deletedRecords[0]));\n  } catch (error) {\n    console.error(error);\n    res.statusCode = 500;\n    res.json({\n      msg: 'Something went wrong'\n    });\n  }\n});","map":{"version":3,"sources":["C:/Users/kshan/Desktop/Web dev projects/subscriptions_tracker/pages/api/deleteSubs.js"],"names":["table","minifyRecord","auth0","OwnsRecord","requireAuthentication","req","res","id","body","deletedRecords","destroy","statusCode","json","error","console","msg"],"mappings":"AAAA,SAASA,KAAT,EAAeC,YAAf,QAAmC,qBAAnC;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AAEA,eAAeD,KAAK,CAACE,qBAAN,CAA4B,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC3D,QAAM;AAAEC,IAAAA;AAAF,MAASF,GAAG,CAACG,IAAnB;;AACA,MAAI;AACA,UAAMC,cAAc,GAAG,MAAMT,KAAK,CAACU,OAAN,CAAc,CACvCH,EADuC,CAAd,CAA7B;AAIAD,IAAAA,GAAG,CAACK,UAAJ,GAAiB,GAAjB;AACAL,IAAAA,GAAG,CAACM,IAAJ,CAASX,YAAY,CAACQ,cAAc,CAAC,CAAD,CAAf,CAArB;AACH,GAPD,CAOE,OAAOI,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAP,IAAAA,GAAG,CAACK,UAAJ,GAAiB,GAAjB;AACAL,IAAAA,GAAG,CAACM,IAAJ,CAAS;AAAEG,MAAAA,GAAG,EAAE;AAAP,KAAT;AACH;AACJ,CAdc,CAAf","sourcesContent":["import { table,minifyRecord } from './utils/Airtable.js';\r\nimport auth0 from './utils/auth0';\r\nimport OwnsRecord from '../middleware/OwnsRecord.js';\r\n\r\nexport default auth0.requireAuthentication(async (req, res) => {\r\n    const { id } = req.body;\r\n    try {\r\n        const deletedRecords = await table.destroy([\r\n            id\r\n        ]);\r\n       \r\n        res.statusCode = 200;\r\n        res.json(minifyRecord(deletedRecords[0]));\r\n    } catch (error) {\r\n        console.error(error);\r\n        res.statusCode = 500;\r\n        res.json({ msg: 'Something went wrong' });\r\n    }\r\n})\r\n"]},"metadata":{},"sourceType":"module"}